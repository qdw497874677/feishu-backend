server:
  port: 8080
  servlet:
    context-path: /

# 飞书配置
feishu:
  appid: ${FEISHU_APPID:your_app_id}
  appsecret: ${FEISHU_APPSECRET:your_app_secret}
  encrypt-key: ${FEISHU_ENCRYPT_KEY:your_encrypt_key}
  verification-token: ${FEISHU_VERIFICATION_TOKEN:your_verification_token}
  mode: listener
  listener:
    enabled: true
    heartbeat-interval: 30  # 秒
    reconnect:
      initial-delay: 1000  # 毫秒
      max-delay: 30000     # 最大 30 秒
      max-attempts: 10     # 最大重试次数
    timeout:
      connect: 10000       # 连接超时
      read: 60000          # 读取超时
  reply:
    mode: DEFAULT  # 可选值: DEFAULT, TOPIC
  topic-mapping:
    storage-type: sqlite  # 可选值: file, sqlite (默认: sqlite)
    sqlite:
      path: data/feishu-topic-mappings.db  # SQLite 数据库文件路径

# OpenCode 配置
opencode:
  # 服务端 URL（默认: http://localhost:4098）
  server-url: ${OPencode_SERVER_URL:http://localhost:4098}
  # HTTP 基本认证用户名（默认: opencode）
  username: ${OPencode_USERNAME:opencode}
  # HTTP 基本认证密码（通过环境变量设置）
  password: ${OPencode_SERVER_PASSWORD:}
  # 连接超时时间（秒）
  connect-timeout: 10
  # 请求超时时间（秒）
  request-timeout: 120
  # 最大输出长度（字符）
  max-output-length: 5000
  # 是否启用异步执行
  async-enabled: true

# 日志配置
logging:
  level:
    root: INFO
    com.qdw.feishu: DEBUG
    com.alibaba.cola: INFO
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
  charset:
    console: UTF-8

# Spring 配置
spring:
  application:
    name: feishu-bot
  jackson:
    time-zone: GMT+8
    date-format: yyyy-MM-dd HH:mm:ss
    serialization:
      write-dates-as-timestamps: false
